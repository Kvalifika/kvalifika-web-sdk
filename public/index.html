<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="./js/index.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <style>


    .kyc-iframe {
      border: none !important;

    }

    body {
      padding: 0 !important;
      margin:  0 !important;
    }
  </style>

  <script>

    const generateVerification = async () => {
      try {

        // const { data } = await axios({
        //   url: 'http://api.kvalifika.com/verification/generate',
        //   method: 'POST',
        //   data: {
        //     appId: '46e41747-3307-45cf-aba3-90fcde586a91',
        //   },
        //   headers: {
        //     Originn: 'https://crystalbet.com',
        //   }
        // })

        // const { data } = await axios({
        //   url: 'https://apistaging.kvalifika.com/verification/generate',
        //   method: 'POST',
        //   data: {
        //     appId: '8985563d-35b1-4778-9adb-610a24f9c05e',
        //   },
        //   headers: {
        //     Originn: 'https://pashabank.ge',
        //   }
        // })

        const { data } = await axios({
          url: 'https://apidev.kvalifika.com/verification/generate',
          method: 'POST',
          data: {
            appId: '5310afaf-d22c-4cec-9e3a-3b5c5c5054eb',
          },
          options: {
            "successCallbackUrl": "https://www.kvalifika.com/",
            "errorCallbackUrl":"https://www.kvalifika.com/"
          },
          headers: {
            Originn: 'https://crystalbet.com',
          }
        })


        const iframe = document.createElement("iframe");
        iframe.setAttribute('class', 'kyc-iframe')
        iframe.setAttribute("id", "kvalifikaIframe");
        iframe.setAttribute("src", data.url);
        iframe.setAttribute("style", "width: 100vw; height: 100vh");
        iframe.setAttribute("allow", "camera");
        iframe.setAttribute("allowfullscreen", true);
        iframe.setAttribute("scrolling", "yes");

        const container = document.querySelector("#kvalifika-iframe-container");
        container.appendChild(iframe);

      } catch (error) {
        console.log(error)
      }
    };


    generateVerification();
  </script>
</head>

<body>
  <!-- ხდება ფრეიმით ჩატვირთვა აპლიკაციის -->
  <div id="kvalifika-iframe-container"></div>

</body>

</html>