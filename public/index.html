<head>
  <script>
    const checkSession = async (sessionId) => {
      const data = await fetch(`/check-session/${sessionId}`)
      const body = await data.json()
      return JSON.parse(body)
    }

    const nextAction = ({ document: documentStatus, liveness }) => {
      if(documentStatus && liveness) {
        const frame = document.getElementById('myFrame')
        frame.remove()
        
        const p = document.createElement("p")
        p.innerHTML = "success"
        document.body.appendChild(p)
      }
    }
    window.addEventListener('message', async event => {
      const body = await checkSession(event.data)
      nextAction(body)
    }); 
  </script>
</head>
<body style="width: 100%; height: 100%;">
  <iframe id='myFrame' src="https://turbo.kyc.ge/" allow="camera" width="80%" height="80%">

  </iframe>
</body>