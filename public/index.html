<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <script>

    const generateVerification = async () => {
      try {

        const opts = {

          // Liveness type. Kvalifika Supports 2D, 3D Liveness. 
          // 0 - 3D Liveness
          // 1 - 2D Liveness.
          liveness: 0,

          // Use or not kvalifika custom document UI
          isKvalifikaDocument: true,

          // For 2D Liveness we can skip specific parts of document section.
          // 0 - renders selection screen for both ID and passport
          // 1 - renders only ID screen
          // 2 - renders only passport screen
          // 3 - Skips document step
          document: 0,

          // Language. defaults to Georgian. possible values, en, ge
          lang: 'en',

          // Use or not document upload functionality insetad of camera.
          is2DPhotoUploadEnabled: true,

          // redirects window to success url once session finishes successfuly
          successCallbackUrl: 'http://some-url',

          // redirects window to error url once session fails
          errorCallbackUrl: 'http://some-url'

        }

        // Example 1. 2D Liveness with default document. camera
        const options = { 
          liveness: 1,
          isKvalifikaDocument: true,
          is2DPhotoUploadEnabled: false
        }

        

        // Example 2. 3D Session, on document step selects only id
        // const options = {
        //   liveness: 0,
        //   isKvalifikaDocument: false,
        //   document: 3
        // }


        // Example 3. 2D Session with document upload instead of using camera
        // const options = {
        //   liveness: 1,
        //   isKvalifikaDocument: true,
        //   is2DPhotoUploadEnabled: true,
        //   document: 1,
        //   lang: 'en'
        // }

        const { data } = await axios({
          url: 'https://apidev.kvalifika.com/verification/generate',
          method: 'POST',
          data: {
            appId: '13ef9375-fbb2-402c-9f3c-f6d996428447',
            options
          },
          headers: {
            Originn: 'https://test.demo',
          }
        })

        const iframe = document.createElement("iframe");
        iframe.setAttribute("id", "kvalifikaIframe");
        iframe.setAttribute("src", `${data.url}`);
        iframe.setAttribute("style", "width: 100vw; height: 100vh");
        iframe.setAttribute("allow", "camera");
        iframe.setAttribute("allowfullscreen", true);
        iframe.setAttribute("scrolling", "yes");

        const container = document.querySelector("#kvalifika-iframe-container");
        container.appendChild(iframe);

      } catch (error) {
        console.log(error)
      }
    };


    generateVerification();
  </script>
</head>

<body>
  <!-- ხდება ფრეიმით ჩატვირთვა აპლიკაციის -->
  <div id="kvalifika-iframe-container"></div>
  <!-- <iframe allow="camera" scrolling  allowfullscreen style="width: 100vw; height: 100vh;" src="https://turbo.kyc.ge/?sessionId=933a42cd-e575-42dc-84da-a910f31e8ad0"  frameborder="0"></iframe> -->

</body>

</html>